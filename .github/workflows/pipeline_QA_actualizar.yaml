name: Sincronizar Dev1 → QA1 (push directo)

on:
  push:
    branches:
      - Dev1
  workflow_dispatch:

permissions:
  contents: write

jobs:
  sync-to-qa1:
    runs-on: self-hosted
    steps:
      - name: Testing hello world
        run: |
          git config user.name "Redque38"
          git config user.email "enrikesoto38@gmail.com"

      - name: Empujar Dev1 a QA1 (crea/actualiza)
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }} 
        run: |
          # Traer referencia remota de QA1 si existe (no falla si no existe)
          git fetch origin QA1 || true
          # Forzar actualización de QA1 para que apunte al mismo commit que Dev1.
          # --force-with-lease evita sobrescribir cambios concurrentes sin intención.
          git push origin HEAD:refs/heads/QA1 --force-with-lease
